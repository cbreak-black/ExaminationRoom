%!TEX TS-program = xelatex
%!TEX encoding = UTF-8 Unicode

\documentclass[12pt,twoside,bibliography=totoc]{scrartcl}
%\documentclass[12pt, a4paper]{article}

\usepackage{ifpdf}

\ifpdf
\usepackage[pdftex]{graphicx}
\usepackage[pdftex,pageanchor,colorlinks,pdfborder=0,breaklinks,urlcolor=blue]{hyperref}
\else
\usepackage[dvipdfm]{graphicx}
\usepackage[dvipdfm,pageanchor,colorlinks,pdfborder=0,breaklinks,urlcolor=blue]{hyperref}
\fi

\usepackage[english]{babel}
\usepackage{xunicode}% provides unicode character macros
\usepackage{xltxtra} % provides some fixes/extras
%\usepackage{german}
%\usepackage{longtable}
%\usepackage{tocbibind}
%\usepackage{makeidx}
\usepackage{units}
%\usepackage{pdfsync}  % enable tex source and pdf output syncronicity
%\usepackage[all]{xy}
\usepackage{multicol}
\usepackage[figuresright]{rotating}
%\usepackage{wrapfig}
\usepackage{subfigure}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{eso-pic}

\usepackage{fontspec}
\defaultfontfeatures{Mapping=tex-text} % Scale=MatchLowercase,
% http://scripts.sil.org/FontDownloadsGentium
\setmainfont[]{Gentium Book Basic}
%\setmainfont[]{Hoefler Text}
%\setmainfont[]{Baskerville}
%\setmainfont[]{Optima}
%\setmainfont[]{Palatino}
\setsansfont[]{Helvetica Neue}
\setmonofont{Courier}

\lstset{
	language=C++,
	basicstyle=\ttfamily\small, % print whole listing small
	keywordstyle=\color{blue},%\bfseries,
	identifierstyle=, % nothing happens
	commentstyle=\color{green}, % white comments
	stringstyle=\color{red}\ttfamily, % typewriter type for strings
	showstringspaces=false,
	numbers=left, numberstyle=\tiny, stepnumber=1, numbersep=5pt,
	columns=flexible,% fixed
	breaklines=true,
	tabsize=4,
	xleftmargin=1em
}

\lstdefinelanguage{lua}
{
	morecomment = [l]{--},
	morecomment = [s]{--[[}{]]}, % lua supports more
	morestring=[b]",
	morestring=[b]',
	sensitive = true,
	morekeywords = {
	and, break, do, else, elseif,
	end, false, for, function, if,
	in, local, nil, not, or, repeat,
	return, then, true, until, while }
}

%\AddToShipoutPicture{
%\AtTextCenter{
%	\makebox(0,0)[c]{\resizebox{\textwidth}{!}{
%		\rotatebox{45}{
%			\color[rgb]{.85,.85,.85}
%			\textsf{\textbf{DRAFT}}}}
%		}
%	}
%}

\usepackage{geometry} % to change the page dimensions
\geometry{a4paper}
\geometry{textwidth=16.0cm,textheight=24.5cm}
\geometry{left=3.0cm,twoside}
\parskip=0 cm
\parindent=0.0cm

\renewcommand{\baselinestretch}{1.2}

\newcommand{\mytitle}{Designing and implementing a flexible and extensible testing framework}

\usepackage{fancyhdr} % This should be set AFTER setting up the page geometry
\pagestyle{fancy} % options: empty , plain , fancy
\fancyfoot{}
\fancyfoot[LE,RO]{\textrm{\thepage}}
\fancyfoot[LO,RE]{\textit{Roethlin, G. 2008}}

\renewcommand{\labelitemi}{-}

\newcommand{\todo}[1]{{\large\color{red!50} TODO: #1}}

\newcommand{\ER}[0]{\textit{ExaminationRoom}}

% Depth of the TOC
%\setcounter{secnumdepth}{3}
%\setcounter{tocdepth}{2}

\hypersetup{
    pdftitle={\mytitle},
%    pdfsubject={Subject of the document}, % Subject 
    pdfauthor={Gerhard Roethlin},              % Author
    pdfkeywords={master, stimulus presentation software, stereo vision},       % Keywords
}

\title{Master Thesis: \mytitle
%\\{\large Designing and implementing a flexible and extensible testing framework}
}
\author{\normalsize Gerhard R\"othlin 
{\texttt{\href{mailto:cbreak@the-color-black.net}{cbreak@the-color-black.net}}}}
\date{2008.01.07 - 2008.07.07}

\ifpdf
\DeclareGraphicsExtensions{.pdf, .jpg, .tif}
\else
\DeclareGraphicsExtensions{.eps, .jpg}
\fi

\begin{document}

\maketitle

\begin{center}
\includegraphics[width=15cm,clip,trim=0cm 0cm 0cm 0cm]{media/title.png}
\end{center}

\input{sections/abstract.tex}
\clearpage

\begin{multicols}{2}
\tableofcontents
\end{multicols}
\clearpage

\begin{multicols}{2}
\input{sections/introduction.tex}
\end{multicols}
\clearpage

\part{Program Design}
\begin{multicols}{2}
\input{sections/requirements.tex}
\input{sections/design.tex}
\input{sections/cues.tex}
\end{multicols}
\clearpage

\part{Implementation}
\begin{multicols}{2}
\input{sections/codingstyle.tex}
\input{sections/implementation.tex}
\input{sections/compiling.tex}
\input{sections/knownissues.tex}
\end{multicols}
\clearpage

\part{Documentation}
\begin{multicols}{2}
\input{sections/cppapi.tex}
\input{sections/luaapi.tex}
\input{sections/sceneformat.tex}
\input{sections/makingascene.tex}
\input{sections/examples.tex}
\input{sections/logparser.tex}
\end{multicols}

\clearpage
\part{Practical Use}
\begin{multicols}{2}
\input{sections/conclusions.tex}
\end{multicols}
\clearpage

\appendix
\pagestyle{plain} % options: empty , plain , fancy

\part{Appendix}

\input{sections/appendix.tex}
\input{sections/screenshots.tex}
\input{sections/sources.tex}



\end{document}
\end
